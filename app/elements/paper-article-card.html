<!--
This is the article card for projects, tutorials, and other informationl text.
It can take in: title, content, and date. An image can also be placed within the
element as well.
-->

<link rel="import" href="bower_compnents/polymer/polymer.html">
<link rel="import" href="bower_components/paper-card/paper-card.html">
<!-- <link rel="import" href="bower_components/paper-button/paper-button.html"> -->

<!--
TODO: 1. Add an optional animation for opening articles
      2. More properly implment the image being passed in
      3. Default image, probably OSC logo
      4. May need to resize images for different sized screens
-->

<dom-module id="paper-article-card">
    <template>

        <style>
            paper-card {
                @apply(--layout-horizontal);
                /*max-height: 200px;*/
            }
            ::content img {
                max-height: 200px;
                background-size: cover;
                float: left;
            }
            .article-content {
                @apply(--layout-flex);
                /* This stops showing text when it runs out of space */
                /*text-overflow: ellipsis;*/
                /*white-space: nowrap;*/
                overflow: hidden;
            }
            .article-name {
                @apply(--paper-font-headline);
            }
            .article-subinfo {
                color: var(--paper-grey-600);
                margin: 10px 0;
            }
            a {
                color: black;
                text-decoration: none;
            }
            paper-button {
                color: black;
                float: right;
                margin-bottom: 5px;
            }
        </style>

        <!-- Based of the paper-card class -->
        <paper-card>
            <!-- Where the image goes into -->
            <a href={{link}}>
                <content></content>
            </a>

            <!-- Main content -->
            <div class="article-content">
                <div class="card-content">
                    <div class="article-name">{{title}}</div>
                    <div class="article-subinfo">{{date}}</div>
                    <div>{{shortendText}}</div>
                    <!-- <paper-button raised on-tap="toggleDialog">Read More</paper-button> -->
                </div>
                <div class="card-actions">
                        <paper-button on-tap="toggleDialog">Read More</paper-button>
                    <a href={{link}}>
                        <paper-button>Go to</paper-button>
                    </a>
                </div>
            </div>
        </paper-card>

        <!-- Dialog with more content -->
        <!-- <link rel="import" href="components/neon-animation/animations/scale-up-animation.html">
        <link rel="import" href="components/neon-animation/animations/fade-out-animation.html"> -->

        <paper-dialog id="dialog">
            <div class="card-content">
                <div class="article-name">{{title}}</div>
                <div class="article-subinfo">{{date}}</div>
                <paper-dialog-scrollable>
                    <div class="ellipsis">{{text}}</div>
                </paper-dialog-scrollable>
            </div>
            <div class="buttons">
              <paper-button dialog-dismiss>Close</paper-button>
            </div>
        </paper-dialog>


    </template>

    <script>
        Polymer({
            is: "paper-article-card",

            // Default values for the element
            properties: {
                title: {
                    type: String,
                    value: 'GNU'
                },
                date: {
                    type: String,
                    // value: '01/01/1970'
                },
                link: {
                    type: String,
                    // value: "https://www.gnu.org/software/"
                },
                text: {
                    type: String,
                    value: 'GNU stands for "GNU is Not Unix". This is because GNU '
                    + 'is not Unix. It is the most logical choice for naming something '
                    + 'that is not Unix. Why you ask? Because it\'s not Unix. What is '
                    + 'Unix then you ask? Aww well, it\'s simple. Unix is not GNU. '
                    + 'This might be confusing, because Unix does not stand for "Unix '
                    + 'is not GNU." This is an understandable misconception, because '
                    + 'as you know, Unix is not GNU.'
                },
                shortendText: {
                    type: String,
                    computed: 'shortenText(text)'
                }
            },
            // For passing the image http://jsbin.com/rijezabapuwe/1/edit?html,output
            getimage: function(idx) {
                return this.querySelectorAll("img")[idx];
            },
            // Toggle dialog to see full text description
            toggleDialog: function() {
                this.$.dialog.toggle();
            },
            // This will display the shortened text for the card.
            shortenText: function(text) {
                var str = text;
                if (text.length > 200) {
                    str = text.substring(0, 200) + '...';
                }
                return str;
            }
        });
    </script>

</dom-module>
